import{$ as a,A as m}from"./auth-Dh7lbV3Z.js";import{I as t,B as d,F as i}from"./input-C-Bf7OHr.js";import{V as c}from"./validacao-Df64VyJH.js";const l={email:!1};function u(){const o=a("#email").val().trim(),e=a("#password").val(),n=o.length>0&&e.length>0;a("#btn-submit").prop("disabled",!n)}function f(){const o=a("#email").val().trim(),e=a("#password").val();i.limpar("mensagem-feedback"),a(".input").removeClass("input-error");const n=c.validarEmail(o);return n.valido?!e||e.length<1?(i.erro("mensagem-feedback","Digite sua senha"),a("#password").addClass("input-error").focus(),null):{email:o,senha:e}:(i.erro("mensagem-feedback",n.mensagem),a("#email").addClass("input-error").focus(),null)}function g(o){i.sucesso("mensagem-feedback",`Bem-vindo(a), ${o.nome}!`),setTimeout(function(){a("main").addClass("animate-exit"),setTimeout(function(){window.location.href="./dashboard.html"},300)},800)}function p(o,e,n){let r="Erro ao fazer login. Tente novamente.";switch(o.message){case"Usuário não encontrado":r="E-mail não cadastrado. Verifique ou crie uma conta.",a("#email").addClass("input-error");break;case"Senha incorreta":r="Senha incorreta. Tente novamente.",a("#password").addClass("input-error").val("").focus();break;case"error":r="Erro de conexão. Verifique se o servidor está rodando.";break}i.erro("mensagem-feedback",r),d.restaurar(n),e.addClass("animate-shake"),setTimeout(function(){e.removeClass("animate-shake")},500)}async function h(o){o.preventDefault();const e=a(this),n=e.find('button[type="submit"]'),r=f();if(r){d.loading(n,"Entrar");try{const s=await m.login(r.email,r.senha);g(s)}catch(s){p(s,e,n)}}}function b(){a("#email, #password").on("input",u),t.configurarValidacao(a("#email"),c.validarEmail,l,"email"),a("#form-login").on("submit",h),t.configurarEfeitoFoco(".input")}function v(){m.redirecionarSeLogado(),b()}a(document).ready(v);
