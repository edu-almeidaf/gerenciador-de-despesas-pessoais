import{$ as e,A as d,F as i,B as c}from"./auth-CSSp3u3s.js";import{V as u}from"./validacao-DpY9Cg6P.js";e(document).ready(function(){d.redirecionarSeLogado();function f(){const o=e("#email").val().trim(),s=e("#password").val(),a=o.length>0&&s.length>0;e("#btn-submit").prop("disabled",!a)}e("#email, #password").on("input",f),e("#email").on("blur",function(){const o=e(this).val(),s=e(this),a=e("#email-erro");if(o.length>0){const n=u.validarEmail(o);n.valido?(s.removeClass("input-error").addClass("input-success"),a.length&&a.addClass("hidden")):(s.addClass("input-error").removeClass("input-success"),a.length&&a.text(n.mensagem).removeClass("hidden"))}}),e("#email").on("input",function(){e(this).removeClass("input-error").removeClass("input-success"),e("#email-erro").addClass("hidden")}),e("#form-login").on("submit",function(o){o.preventDefault();const s=e(this),a=s.find('button[type="submit"]'),n=e("#email").val().trim(),l=e("#password").val();i.limpar("mensagem-feedback"),e(".input").removeClass("input-error");const m=u.validarEmail(n);if(!m.valido){i.erro("mensagem-feedback",m.mensagem),e("#email").addClass("input-error").focus();return}if(!l||l.length<1){i.erro("mensagem-feedback","Digite sua senha"),e("#password").addClass("input-error").focus();return}c.loading(a,"Entrar"),d.login(n,l).then(function(t){i.sucesso("mensagem-feedback",`Bem-vindo(a), ${t.nome}!`),setTimeout(function(){e("main").addClass("animate-exit"),setTimeout(function(){window.location.href="./dashboard.html"},300)},800)}).catch(function(t){let r="Erro ao fazer login. Tente novamente.";t.message==="Usuário não encontrado"?(r="E-mail não cadastrado. Verifique ou crie uma conta.",e("#email").addClass("input-error")):t.message==="Senha incorreta"?(r="Senha incorreta. Tente novamente.",e("#password").addClass("input-error").val("").focus()):t.statusText==="error"&&(r="Erro de conexão. Verifique se o servidor está rodando."),i.erro("mensagem-feedback",r),c.restaurar(a),s.addClass("animate-shake"),setTimeout(function(){s.removeClass("animate-shake")},500)})}),e(".input").on("focus",function(){e(this).closest(".form-control").addClass("scale-[1.01]")}).on("blur",function(){e(this).closest(".form-control").removeClass("scale-[1.01]")})});
